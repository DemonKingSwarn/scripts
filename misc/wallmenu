#!/bin/sh

nsxiv_opts="-tfpo"
walldir="$HOME/pix/wall"

menu() {
	printf "%s\n" "set a wallpaper"
	printf "%s\n" "set a random wallpaper"
	printf "%s\n" "exit"
}

reload_swww() {
  swww clear
  swww img "$HOME/.cache/wall.jpg" --transition-type center --transition-fps 30
}

set_wal() {
	wal=$(nsxiv "$nsxiv_opts" $walldir/*.jpg)
  cp "$wal" "$HOME/.cache/wall.jpg"
  reload_swww
}

set_random() {
  rand_wall="$(ls $walldir/*.jpg | shuf -n 1)"
	cp "$rand_wall" "$HOME/.cache/wall.jpg"
  reload_swww
}

choice=$(menu | rofi -dmenu | cut -d' ' -f3)

case $choice in
	wallpaper)
		set_wal
		;;
	random)
		set_random
		;;
	*)
		exit 0
		;;
esac
